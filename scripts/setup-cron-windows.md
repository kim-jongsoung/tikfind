# 📅 Windows 작업 스케줄러 설정 가이드

## 🎯 목적
매일 자동으로 인기곡 99곡을 수집하여 DB를 확장합니다.

---

## 📋 설정 방법

### 1. 작업 스케줄러 열기
- Windows 검색에서 "작업 스케줄러" 입력
- 또는 `Win + R` → `taskschd.msc` 입력

### 2. 기본 작업 만들기
1. 오른쪽 패널에서 **"기본 작업 만들기"** 클릭
2. 이름: `TikFind 인기곡 자동 수집`
3. 설명: `매일 오전 3시에 인기곡 99곡을 자동으로 수집합니다`

### 3. 트리거 설정
1. **"매일"** 선택
2. 시작 시간: `오전 3:00`
3. 다음 클릭

### 4. 작업 설정
1. **"프로그램 시작"** 선택
2. 프로그램/스크립트:
   ```
   C:\Program Files\nodejs\node.exe
   ```
3. 인수 추가:
   ```
   scripts\collectDailySongs.js
   ```
4. 시작 위치:
   ```
   C:\Users\kim\Desktop\tikfind
   ```

### 5. 완료
- 설정 확인 후 **"마침"** 클릭

---

## ✅ 테스트 방법

### 수동 실행 테스트
1. 작업 스케줄러에서 방금 만든 작업 찾기
2. 오른쪽 클릭 → **"실행"** 선택
3. PowerShell 창이 열리면서 수집 시작
4. 완료되면 자동으로 닫힘

### 로그 확인
- 작업 스케줄러 → 작업 선택 → 하단 "기록" 탭
- 마지막 실행 결과: `0x0` (성공)

---

## 📊 예상 결과

### 매일 자동 수집
- 오전 3시에 자동 실행
- 99곡 수집 (약 5~10분 소요)
- 중복 자동 제거
- 실패 시 다음날 재시도

### 20일 후
- 총 1,980곡 수집
- 장르별 균등 분배
- 완전 무료 (YouTube API 무료 한도 내)

---

## ⚠️ 주의사항

1. **PC가 켜져 있어야 함**
   - 작업 스케줄러는 PC가 꺼져 있으면 실행 안됨
   - 해결: "PC가 꺼져 있을 때 작업 실행" 옵션 활성화 (고급 설정)

2. **절전 모드 해제**
   - 절전 모드에서는 작업이 실행되지 않을 수 있음
   - 해결: 전원 옵션에서 "절전 모드 해제" 설정

3. **Node.js 경로 확인**
   - Node.js 설치 경로가 다를 수 있음
   - 확인: PowerShell에서 `where.exe node` 실행

---

## 🔧 고급 설정 (선택)

### 작업 속성 수정
1. 작업 선택 → 오른쪽 클릭 → "속성"
2. **"트리거"** 탭:
   - 시간 변경 가능 (예: 오전 2시, 오후 11시 등)
3. **"조건"** 탭:
   - ✅ "컴퓨터의 AC 전원이 켜져 있는 경우에만 작업 시작" 해제
   - ✅ "작업을 실행하기 위해 절전 모드 종료" 체크
4. **"설정"** 탭:
   - ✅ "작업이 실패하면 다시 시작 간격" → 1시간
   - ✅ "다시 시작 시도 횟수" → 3회

---

## 📞 문제 해결

### 작업이 실행되지 않을 때
1. 작업 스케줄러 → 작업 선택 → "기록" 탭 확인
2. 오류 코드 확인:
   - `0x1`: Node.js 경로 오류
   - `0x2`: 스크립트 경로 오류
   - `0x41303`: 작업이 아직 실행 중

### 수동 테스트
```powershell
cd C:\Users\kim\Desktop\tikfind
node scripts\collectDailySongs.js
```

---

## 🎉 완료!

이제 매일 자동으로 인기곡이 수집됩니다!
- 20일 후: 1,980곡
- 1개월 후: 2,970곡
- 3개월 후: 8,910곡 (중복 제거 후 ~5,000곡)

**비용: 완전 무료!** ✅
